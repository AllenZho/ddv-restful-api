{"version":3,"sources":["webpack:///webpack/bootstrap 014197028090609211d1","webpack:///./util/index.js","webpack:///./lib/api.js","webpack:///./lib/request.js","webpack:///./lib/session.js","webpack:///./lib/sign.js","webpack:///./lib/url.js","webpack:///./lib/ajax.js","webpack:///external \"crypto-js/core\"","webpack:///external \"crypto-js/enc-base64\"","webpack:///./events/index.js","webpack:///./lib/apiExternal.js","webpack:///./lib/apiTryData.js","webpack:///./lib/index.js","webpack:///./util/nextTick.js","webpack:///external \"crypto-js/enc-hex\"","webpack:///external \"crypto-js/enc-utf8\"","webpack:///external \"crypto-js/hmac-sha256\"","webpack:///external \"crypto-js/md5\"","webpack:///external \"es5-shim\"","webpack:///external \"es6-shim\"","webpack:///external \"events\"","webpack:///external \"http\"","webpack:///external \"https\""],"names":["require","module","exports","util","createNewidSumLast","createNewidTimeLast","Object","assign","createNewPid","createNewid","is10","r","time","toString","parseInt","createGuid","s","replace","c","Math","random","v","createRequestId","pid","rid","ridLen","ridT","ridNew","i","Number","length","charAt","substr","now","Date","getTime","isFunction","fn","isArray","Array","apply","arguments","isNumber","obj","parseFloat","isGlobal","global","inArray","a","b","clone","myObj","myNewObj","undefined","push","constructor","innerHTML","innerText","tagName","tabIndex","copyObjByKey","oldObj","newObj","keys","forEach","key","setErrorId","errorId","error","error_id","argsToArray","args","prototype","slice","call","nextTick","kEscapedMap","urlEncode","string","encodingSlash","result","encodeURIComponent","$1","urlEncodeExceptSlash","value","buildParams","data","isQuery","_buildParamsToArray","join","prefix","keyt","_buildParamsAddPrefix","hasOwnProperty","isNotArray","ddvRestFulApi","url","request","sign","EventEmitter","path","req","res","promise","Promise","resolve","reject","then","apiPromiseInit","apiPromiseRun","_request","e","serverRes","JSON","parse","body","e1","console","log","statusCode","status","message","state","code","msg","Error","destroy","apiPromiseBaseInit","options","catch","isSessionInit","sendData","headers","method","context","create","queryObject","query","baseUrl","isServerNode","host","port","protocol","request_id","removeUndefinedValue","buildParamsRun","str","toUpperCase","send","requests","response","success","fail","split","ddvRestFulApiMethod","utilInitKey","apiUtil","setBaseUrl","runRequest","o","ajax","session","api","cryptoJsCore","cryptoJsBase64","getSessionTrueCbs","getSessionInitCbs","_getSessionTrueDataCbsIng","_getSessionInitCbsIng","setLongStorage","isUseLong","isLongStorage","Boolean","setSessionInitTrySum","sum","initTrySum","setSessionInitPath","sessionInitPath","unescape","escape","init","isRun","_getSessionInitCbs","bind","isClientWindow","_initRun","cbt","shift","_initRunBaseInit","initTryNum","getData","sessionData","session_card","createCard","authorization","session_id","getUTCServerTime","difference_time","signingKey","HmacSHA256","session_key","Authorization","_serverResObj","type","session_data","server_time","local_time","expires_time","setData","stringify","getTrueData","_getSessionTrueDataCbs","_getTrueDataRun","sessionO","cookieName","cookieNameEnCode","isSessionDataPass","sessionDataStr","sessionDataOldStr","_cookieNameEnCode","_setDataNode","_setDataClient","_getDataNode","_getDataClient","arrayToStr","cookiename","cookieDdvRestfulApiStr","_getCookiesServer","_setCookiesServer","getExpiresDate","cookies","_getCookiesByStr","cookie","expires","domain","isSecure","t","secure","trim","cookiesSetArray","setHeader","isLocalCookie","isLocalStorage","isSessionStorage","_getCookiesClient","localStorage","getItem","_setCookiesClient","sessionStorage","setItem","document","VS_COOKIEDM","name","enc","Utf8","sort","days","hours","minutes","seconds","ExpiresDate","setDate","getDate","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","toGMTString","window","_signRun","headersPrefix","excludeHeaderKeys","setHeadersPrefix","signInit","_signRunBaseInit","_signRunQueryInit","_signRunHeadersFormat","_signRunHeadersSort","sessionId","sessionKey","sessionCard","differenceTime","canonicalRequest","n","authCanonicalHeadersStr","sessionSign","authHeadersStr","headersPrefixLen","keyLower","headersOld","toLowerCase","indexOf","headersTemp","_trim","Host","md5Base64","queryArray","d","getTimezoneOffset","getUTCFullYear","_replenish","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","text","total","rstr","rstrlen","rstri","md5Hex","isToString","MD5","cryptoJsHex","_t","RegExp","_d","decodeURIComponent","_i","arg","sptr","substring","_f","field","params","tmp","arg2","ii","match","_l","location","email","hash","file","filename","fileext","auth","user","pass","hostname","tld","sub","http","https","isWindow","ajaxbyWindow","ajaxbyNode","parseUrl","xhr","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","statusText","rawHeaders","statusMessage","getAllResponseHeaders","header","matches","open","vt","setRequestHeader","opt","on","write","end","pathquery","tryGetData","promiseFnRun","_dataOld","promiseFnReload","self","tryGetDataRun","_promise","inputData","resData","dataErrorEmit","isReload","_onDataServerErrorFn","onDataServerError","_onDataClientErrorFn","onDataClientError","input","checkOnDataErrorArr","isServer","onCatch","nextTickQueue","nextTickSys","fnc","process","prefixes","setImmediate","postMessage","f","setTimeout","addEventListener","splice"],"mappings":"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","file":"api.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 014197028090609211d1","'use strict'\nrequire('es5-shim')\nrequire('es6-shim')\n// 导出模块\nmodule.exports = util\n// 创建最后总和\nvar createNewidSumLast = 0\n// 创建最后时间\nvar createNewidTimeLast = 0\n// 创建请求id\nObject.assign(util, {\n  createNewPid: function createNewid (is10) {\n    var r\n    if (createNewidTimeLast !== util.time()) {\n      createNewidTimeLast = util.time()\n      createNewidSumLast = 0\n    }\n    r = createNewidTimeLast.toString() + (++createNewidSumLast).toString()\n    // 使用36进制\n    if (!is10) {\n      r = parseInt(r, 10).toString(36)\n    }\n    return r\n  },\n  // 生成guid\n  createGuid: function createGuid (s) {\n    return (s || 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx').replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0\n      var v = c === 'x' ? r : (r & 0x3 | 0x8)\n      return v.toString(16)\n    })\n  }\n})\n\n// 生成请求id\nObject.assign(util, {\n  // 生成请求id\n  createRequestId: function createRequestId () {\n    var pid, rid, ridLen, ridT, ridNew, i\n    // 获取16进制的 pid\n    pid = Number(util.createNewPid(true)).toString(16)\n    // 种子\n    rid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\n    ridNew = ''\n    for (i = rid.length - 1; i >= 0; i--) {\n      ridT = rid[i]\n      if (ridT === 'x') {\n        ridLen = pid.length\n        ridT = pid ? pid.charAt(ridLen - 1) : 'x'\n        pid = pid.substr(0, ridLen - 1)\n      }\n      ridNew = ridT + ridNew\n    }\n    rid = util.createGuid(ridNew)\n    i = ridNew = ridT = ridLen = pid = void 0\n    return rid\n  }\n})\n\n// 时间工具\nObject.assign(util, {\n  // 获取当前时间开始\n  now: function now () {\n    return (new Date()).getTime()\n  },\n  // 获取php的时间戳\n  time: function time () {\n    return parseInt(util.now() / 1000)\n  }\n})\n\n// 基本判断\nObject.assign(util, {\n  // 判断是一个方法\n  isFunction: function isFunction (fn) {\n    return typeof fn === 'function'\n  },\n  // 判断是否为一个数组\n  isArray: function isArray () {\n    return Array.isArray.apply(this, arguments)\n  },\n  isNumber: function isNumber (obj) {\n    return (typeof obj === 'string' || typeof obj === 'number') && (!util.isArray(obj) && (obj - parseFloat(obj) >= 0))\n  },\n  // 判断是否一个标准的global\n  isGlobal: function isGlobal (obj) {\n    return obj !== void 0 && obj === obj.global\n  },\n  // 类似php里面的inArray\n  inArray: function inArray (a, b) {\n    if (!util.isArray(b)) {\n      return false\n    }\n    for (var i in b) {\n      if (b[i] === a) {\n        return true\n      }\n    }\n    return false\n  }\n})\n\n// 基本工具\nObject.assign(util, {\n  // 克隆\n  clone: function clone (myObj) {\n    var i, myNewObj\n    if (!(myObj && typeof myObj === 'object')) {\n      return myObj\n    }\n    if (myObj === null || myObj === undefined) {\n      return myObj\n    }\n    myNewObj = ''\n    if (Array.isArray(myObj)) {\n      myNewObj = []\n      for (i = 0; i < myObj.length; i++) {\n        myNewObj.push(myObj[i])\n      }\n    } else if (typeof myObj === 'object') {\n      myNewObj = {}\n      if (myObj.constructor && myObj.constructor !== Object) {\n        myNewObj = myObj\n      // 防止克隆ie下克隆  Element 出问题\n      } else if (myObj.innerHTML !== undefined && myObj.innerText !== undefined && myObj.tagName !== undefined && myObj.tabIndex !== undefined) {\n        myNewObj = myObj\n      } else {\n        for (i in myObj) {\n          myNewObj[i] = clone(myObj[i])\n        }\n      }\n    }\n    return myNewObj\n  },\n  // 复制对象，通过制定key\n  copyObjByKey: function copyObjByKey (oldObj, newObj, keys) {\n    keys = keys || []\n    keys.forEach(function (key) {\n      oldObj[key] = newObj[key] || oldObj[key]\n    })\n  },\n  // 设置错误id\n  setErrorId: function setErrorId (errorId, error) {\n    error.errorId = errorId\n    error.error_id = errorId\n    return error\n  },\n  // 参数强转数组\n  argsToArray: function argsToArray (args) {\n    return Array.prototype.slice.call(args)\n  }\n})\n\n// nextTick\nObject.assign(util, {\n  nextTick: require('./nextTick.js')\n})\n\n// urlEncode 编码\nObject.assign(util, {\n  // 编码对照数组表\n  kEscapedMap: {\n    '!': '%21',\n    '\\'': '%27',\n    '(': '%28',\n    ')': '%29',\n    '*': '%2A'\n  },\n  // 编码\n  urlEncode: function urlEncode (string, encodingSlash) {\n    var result = encodeURIComponent(string)\n    result = result.replace(/[!'()*]/g, function ($1) {\n      return util.kEscapedMap[$1]\n    })\n    if (encodingSlash === false) {\n      result = result.replace(/%2F/gi, '/')\n    }\n    return result\n  },\n  // path编码\n  urlEncodeExceptSlash: function urlEncodeExceptSlash (value) {\n    return util.urlEncode(value, false)\n  }\n})\n// 对象序列化\nObject.assign(util, {\n  // 编码\n  buildParams: function buildParams (data, isQuery) {\n    var r = util._buildParamsToArray(data, '').join('&')\n    if (isQuery) {\n      r = r.replace(/%20/gi, '+')\n    }\n    return r\n  },\n\n  _buildParamsToArray: function _buildParamsToArray (data, prefix) {\n    var r = []\n    var i, key, keyt, value\n    if (typeof data === 'object') {\n      // 数组\n      if (util.isArray(data)) {\n        for (i = 0; i < data.length; i++) {\n          // 值\n          value = data[i]\n          if (value === void 0) continue\n          // 键\n          keyt = util._buildParamsAddPrefix(i, prefix, (typeof value === 'object'))\n          // 递归处理对象和数组\n          if (typeof value === 'object') {\n            // 插入数组\n            r.push.apply(r, util._buildParamsToArray(value, keyt))\n          } else {\n            // 插入数组\n            r.push(util.urlEncode(keyt) + '=' + util.urlEncode(value))\n          }\n        }\n      } else {\n        for (key in data) {\n          if (!Object.hasOwnProperty.call(data, key)) {\n            continue\n          }\n          // 值\n          value = data[key]\n          if (value === void 0) continue\n          // 键\n          keyt = util._buildParamsAddPrefix(key, prefix)\n          if (typeof value === 'object') {\n            // 插入数组\n            r.push.apply(r, util._buildParamsToArray(value, keyt))\n          } else {\n            // 插入数组\n            r.push(util.urlEncode(keyt) + '=' + util.urlEncode(value))\n          }\n        }\n      }\n    }\n    return r\n  },\n  _buildParamsAddPrefix: function _buildParamsAddPrefix (key, prefix, isNotArray) {\n    if (prefix) {\n      return prefix + '[' + (isNotArray !== false ? key : '') + ']'\n    } else {\n      return key\n    }\n  }\n})\n\nfunction util () {\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./util/index.js","'use strict'\n// 导出模块\nmodule.exports = ddvRestFulApi\n// 工具\nvar util = require('../util')\nvar url = require('./url.js')\nvar request = require('./request.js')\nvar sign = require('./sign.js')\nvar EventEmitter = require('../events')\nObject.assign(ddvRestFulApi, EventEmitter.prototype, new EventEmitter())\n// 方法\nfunction ddvRestFulApi (path, req, res) {\n  var promise = new Promise(function (resolve, reject) {\n    new Promise(function (resolve, reject) {\n      // 下一进程运行\n      util.nextTick(function () {\n        // 这个直接提交，因为该操作仅仅是为了延迟\n        resolve()\n        // 回收\n        resolve = reject = void 0\n      })\n    })\n    .then(function () {\n      // 初始化接口\n      return apiPromiseInit(promise, path, req, res)\n    })\n    .then(function () {\n      // 回收资源\n      path = req = res = void 0\n      // api接口运行\n      return apiPromiseRun(promise)\n    })\n    .then(function (_request) {\n      return new Promise(function (resolve, reject) {\n        var r = null\n        var e = null\n        var res = _request.serverRes\n        try {\n          r = JSON.parse(res.body)\n        } catch (e1) {\n          e = e1\n          e.body = res.body\n          console.log(e.body)\n        }\n        if (e) {\n          e.statusCode = res.statusCode\n          e.error_id = res.status\n          e.message = res.status || 'Unknow Error'\n          e.body = res.body\n          reject(e)\n        } else if (r) {\n          if (r.state) {\n            r.statusCode = r.statusCode || r.code || res.statusCode\n            r.error_id = r.error_id || res.status\n            r.message = r.message || r.msg || res.status || 'Unknow Error'\n            r.body = res.body\n            resolve(r)\n          } else {\n            e = new Error(r.message || r.msg || res.status || 'Unknow Error')\n            e.statusCode = r.statusCode || r.code || res.statusCode\n            e.error_id = r.error_id || res.status\n            e.message = r.message || r.msg || res.status || 'Unknow Error'\n            e.body = res.body\n            reject(e)\n          }\n        }\n        _request.destroy()\n        _request = resolve = reject = r = e = res = void 0\n      })\n    })\n    .then(function (res) {\n      util.nextTick(function () {\n        util.isFunction(promise.destroy) && promise.destroy()\n        // 回收资源\n        promise = void 0\n      })\n      return res\n    })\n    // 绑定回调\n    .then(resolve, reject)\n    // 回收\n    resolve = reject = void 0\n  })\n  return apiPromiseBaseInit(promise)\n}\nfunction apiPromiseRun (promise) {\n  return sign(promise.options)\n  .then(function (options) {\n    return request(options)\n  }).catch(function (e) {\n    if (parseInt(promise.options.serverRes.statusCode) === 403) {\n      promise.options.isSessionInit = true\n      // 重新运行一次\n      return apiPromiseRun(promise)\n    } else {\n      // 还是原路抛出错误\n      return Promise.reject(e)\n    }\n  })\n}\nfunction apiPromiseInit (promise, path, req, res) {\n  var options = promise.options\n  return new Promise(function (resolve, reject) {\n    if (typeof path === 'object') {\n      promise.path(path.path)\n      promise.sendData(path.data)\n      promise.headers(path.headers)\n      promise.method(path.method)\n      resolve()\n    } else if (typeof path === 'string') {\n      promise.path(path || '/')\n      resolve()\n    } else {\n      var e = new Error('method type error')\n      e.error_id = 'UNKNOW_ERROR'\n      reject(e)\n    }\n  }).then(function () {\n    // 设定请求对象\n    if (req && req.req && req.res) {\n      promise.context(req)\n    } else {\n      promise.req(req)\n      promise.res(res)\n    }\n  }).then(function () {\n    options.serverRes = Object.create(null)\n    options.serverRes.statusCode = 0\n    options.serverRes.status = 'UNKNOW_ERROR'\n    options.serverRes.body = ''\n  }).then(function () {\n    options.method = options.method || 'GET'\n    options.queryObject = options.queryObject || Object.create(null)\n    if (typeof options.query === 'object') {\n      options.query = ''\n      Object.assign(options.queryObject, options.query)\n    }\n    options.path = options.path || '/'\n    options.path = (options.path.charAt(0) === '/' ? '' : '/') + options.path\n    options.query = (url('query', options.path) || '').toString()\n    options.path = url('path', options.path) || '/'\n    options.baseUrl = options.baseUrl || ddvRestFulApi.baseUrl || ''\n    options.isServerNode = (options.req && options.res && true) || false\n\n    options.host = url('hostname', options.baseUrl)\n    options.port = url('port', options.baseUrl)\n    options.protocol = url('protocol', options.baseUrl)\n    options.request_id = options.request_id || util.createRequestId()\n  }).then(function removeUndefinedValue () {\n    var key\n    for (key in options.queryObject) {\n      if (options.queryObject[key] === void 0) {\n        delete options.queryObject[key]\n      }\n    }\n    for (key in options.data) {\n      if (options.data[key] === void 0) {\n        delete options.data[key]\n      }\n    }\n    for (key in options.headers) {\n      if (options.headers[key] === void 0) {\n        delete options.headers[key]\n      }\n    }\n  }).then(function buildParamsRun () {\n    var str\n    if (options.queryObject) {\n      str = util.buildParams(options.queryObject, true)\n      if (str) {\n        options.query += (options.query.length > 0 ? '&' : '') + str\n      }\n    }\n    if (options.method === 'GET') {\n      str = util.buildParams(options.data, true)\n      if (str) {\n        options.query += (options.query.length > 0 ? '&' : '') + str\n      }\n    } else {\n      options.body = util.buildParams(options.data)\n    }\n    options = void 0\n  })\n}\n\nfunction apiPromiseBaseInit (promise) {\n  // 基本参数\n  Object.assign(promise, {\n    options: {\n      path: '/',\n      method: 'GET',\n      headers: Object.create(null),\n      data: Object.create(null),\n      query: Object.create(null),\n      req: null,\n      res: null\n    }\n  })\n  // 基本方法\n  Object.assign(promise, {\n    headers: function headers (headers) {\n      this.options.headers = this.options.headers || Object.create(null)\n      Object.assign(this.options.headers, headers || Object.create(null))\n      return this\n    },\n    path: function path (path) {\n      this.options.path = (path || '/').toString()\n      return this\n    },\n    method: function method (method) {\n      this.options.method = (method || this.options.method || 'GET').toString().toUpperCase()\n      return this\n    },\n    // 发送别名\n    send: function sendData (data) {\n      this.options.data = this.options.data || Object.create(null)\n      Object.assign(this.options.data, data || Object.create(null))\n      return this\n    },\n    query: function query (data) {\n      this.options.query = this.options.query || Object.create(null)\n      Object.assign(this.options.query, data || Object.create(null))\n      return this\n    },\n    req: function req (req) {\n      this.options.req = req || this.options.req || null\n    },\n    res: function res (res) {\n      this.options.res = res || this.options.res || null\n    },\n    context: function context (context) {\n      if (context.req && context.res) {\n        this.req(context.req)\n        this.res(context.res)\n      } else if (context.requests && context.response) {\n        this.req(context.requests)\n        this.res(context.response)\n      }\n    },\n    // 销毁\n    destroy: function destroy () {\n      util.nextTick.call(this, function () {\n        var key\n        for (key in this) {\n          if (!Object.hasOwnProperty.call(this, key)) continue\n          delete this[key]\n        }\n        key = void 0\n      })\n    }\n  })\n  // 基本方法\n  Object.assign(promise, {\n    // 发送别名\n    sendData: promise.send,\n    // 成功别名\n    success: promise.then,\n    // 错误别名\n    error: promise.catch,\n    // 失败别名\n    fail: promise.catch\n  })\n  return promise\n}\n\n// 继承使用 Promise 的继承\nddvRestFulApi.prototype = Promise.prototype\n// 默认导出支持 - 允许在 TypeScript 中使用默认导入语法\nddvRestFulApi['default'] = ddvRestFulApi\n// 复制 Promise 的一些方法\n'all race reject resolve'.split(' ').forEach(function (key) {\n  ddvRestFulApi[key] = function () {\n    return Promise[key].apply(Promise, arguments)\n  }\n})\n// 支持五大请求\n'get post put patch del delete'.split(' ').forEach(function (key) {\n  if (!key) {\n    key = 'get'\n  }\n  ddvRestFulApi[key] = function ddvRestFulApiMethod () {\n    key = key === 'del' ? 'delete' : key\n    return ddvRestFulApi.apply(ddvRestFulApi, arguments).method(key.toUpperCase())\n  }\n})\n\nObject.assign(ddvRestFulApi, {\n  // 默认安装一下方法\n  utilInitKey: 'api get post put del delete data'.split(' '),\n  // 安装模块\n  util: function apiUtil (util) {\n    // 扩展请求接口\n    ddvRestFulApi.utilInitKey.forEach(function (key) {\n      util[key] = key === 'api' ? ddvRestFulApi : ddvRestFulApi[key]\n    })\n    // 承诺\n    util.Promise = util.Promise || Promise\n  },\n  // 设置baseUrl\n  setBaseUrl: function setBaseUrl (baseUrl) {\n    ddvRestFulApi.baseUrl = baseUrl\n  }\n\n})\n\nrequire('./apiTryData.js')\n// 对外扩张接口\nrequire('./apiExternal.js')\n\n\n\n// WEBPACK FOOTER //\n// ./lib/api.js","'use strict'\nmodule.exports = function runRequest (o) {\n  return ajax(o).then(function (serverRes) {\n    Object.assign(o.serverRes, serverRes)\n    var e\n    if (o.serverRes.statusCode >= '200' && o.serverRes.statusCode < '300') {\n      return o\n    } else {\n      o.serverRes.message = o.serverRes.message || o.serverRes.msg || o.serverRes.status || 'Unknow Error'\n      e = new Error(o.serverRes.message)\n      e.statusCode = o.serverRes.statusCode\n      e.error_id = e.error_id || o.serverRes.error_id || o.serverRes.status\n      e.message = o.serverRes.message || o.serverRes.status || 'Unknow Error'\n      e.body = o.serverRes.body\n      throw e\n    }\n  }).catch(function (e) {\n    Object.assign(o.serverRes, e)\n    return Promise.reject(e)\n  })\n}\nvar ajax = require('./ajax.js')\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request.js","/* global localStorage sessionStorage VS_COOKIEDM */\n// 导出 session 模块\nmodule.exports = session\n// 工具\nvar util = require('../util')\n// api模块\nvar api = require('./api.js')\n// url模块\nvar url = require('./url.js')\n// 签名模块\nvar sign = require('./sign.js')\n// 请求模块\nvar request = require('./request.js')\n// 编码加密模块\nvar cryptoJsCore = require('crypto-js/core')\n// 编码base64模块\nvar cryptoJsBase64 = require('crypto-js/enc-base64')\n// var cryptoJsUtf8 =\nrequire('crypto-js/enc-utf8')\nvar getSessionTrueCbs = []\nvar getSessionInitCbs = []\nvar _getSessionTrueDataCbsIng = false\nvar _getSessionInitCbsIng = false\n// 对外api接口模块\nObject.assign(session, {\n  // 设置是否使用长存储\n  setLongStorage: function setLongStorage (isUseLong) {\n    session.isLongStorage = Boolean(isUseLong)\n  },\n  // 设置是否使用长存储\n  setSessionInitTrySum: function setSessionInitTrySum (sum) {\n    session.initTrySum = sum || session.initTrySum\n  },\n  // 设置初始化session的path\n  setSessionInitPath: function setSessionInitPath (path) {\n    session.sessionInitPath = path || session.sessionInitPath\n  }\n})\n// 对外 cookie 编码 接口模块\nObject.assign(session, {\n  // 解码\n  unescape: function (str) {\n    return unescape(str || '')\n  },\n  // 编码\n  escape: function (str) {\n    return escape(str || '')\n  }\n})\nObject.assign(session, {\n  // 会话初始化\n  init: function (o) {\n    o = o || Object.create(null)\n    return new Promise(function (resolve, reject) {\n      var isRun = false\n      // 处理回调\n      if (o.isServerNode) {\n        o.req._getSessionInitCbs = o.req._getSessionInitCbs || []\n        // 服务端-处理同一请求多次初始化会话的问题，同一回调\n        o.req._getSessionInitCbs.push([resolve, reject, o])\n        o.req._getSessionInitCbs.push([function () {\n          if (this && this.req) {\n            this.req._getSessionInitCbsIng = false\n          }\n        }.bind(o), function () {\n          if (this && this.req) {\n            this.req._getSessionInitCbsIng = false\n          }\n        }.bind(o), o])\n        if (o.req._getSessionInitCbsIng !== true) {\n          isRun = true\n          o.req._getSessionInitCbsIng = true\n        }\n      } else if (session.isClientWindow) {\n        // 浏览器-处理同一请求多次初始化会话的问题，同一回调\n        getSessionInitCbs.push([resolve, reject, o])\n        getSessionInitCbs.push([function () {\n          _getSessionInitCbsIng = false\n        }, function () {\n          _getSessionInitCbsIng = false\n        }, o])\n        if (_getSessionInitCbsIng !== true) {\n          isRun = true\n          _getSessionInitCbsIng = true\n        }\n      } else {\n        reject(new Error('Neither a browser nor req and res'))\n      }\n      if (isRun) {\n        session._initRun(o).then(function () {\n          // 批量回调成功\n          var cbt\n          if (o && o.req && o.req._getSessionInitCbs) {\n            while ((cbt = o.req._getSessionInitCbs.shift())) {\n              if (cbt && cbt[0] && cbt[2] && util.isFunction(cbt[0])) {\n                cbt[0](cbt[2])\n              }\n              cbt = void 0\n            }\n          } else if (session.isClientWindow && getSessionInitCbs) {\n            while ((cbt = getSessionInitCbs.shift())) {\n              if (cbt && cbt[0] && cbt[2] && util.isFunction(cbt[0])) {\n                cbt[0](cbt[2])\n              }\n              cbt = void 0\n            }\n          }\n          o = void 0\n        }).catch(function (e) {\n          // 批量回调异常\n          var cbt\n          if (o && o.req && o.req._getSessionInitCbs) {\n            while ((cbt = o.req._getSessionInitCbs.shift())) {\n              if (cbt && cbt[1] && util.isFunction(cbt[1])) {\n                cbt[1](e)\n              }\n              cbt = void 0\n            }\n          } else if (session.isClientWindow && getSessionInitCbs) {\n            while ((cbt = getSessionInitCbs.shift())) {\n              if (cbt && cbt[1] && util.isFunction(cbt[1])) {\n                cbt[1](e)\n              }\n              cbt = void 0\n            }\n          }\n          e = o = void 0\n        })\n      }\n      resolve = reject = isRun = void 0\n    })\n  },\n  _initRun: function (o) {\n    // 初始化基本参数\n    session._initRunBaseInit(o)\n    //\n    return new Promise(function (resolve, reject) {\n      var initTrySum = session.initTrySum || o.initTrySum\n      if (o.initTryNum >= initTrySum) {\n        reject(new Error('Session initialization failed, exceeding maximum attempted test'))\n        return\n      } else if (o.initTryNum >= 2) {\n        console.log('清理尝试')\n      } else {\n        resolve(o)\n      }\n      o = void 0\n    }).then(function (o) {\n      return session.getData(o)\n    }).then(function (o) {\n      // 检测设备唯一识别号\n      if (o.sessionData && o.sessionData.session_card) {\n        return o\n      } else {\n        return session.createCard(o)\n      }\n    }).then(function (o) {\n      o.request_id = o.request_id || util.createRequestId()\n\n      // 授权字符串\n      var authorization = 'session-init-v1'\n      authorization += '/' + o.request_id\n      authorization += '/' + (o.sessionData.session_id || '0')\n      authorization += '/' + o.sessionData.session_card\n      authorization += '/' + sign.getUTCServerTime(o.sessionData.difference_time || 0) + '/' + '1800'\n      var signingKey = sign.HmacSHA256(authorization, (o.sessionData.session_key || 'session_key'))\n      // 生成加密key\n      authorization += '/' + util.createGuid()\n      authorization += '/' + sign.HmacSHA256(authorization, signingKey)\n\n      o.headers = o.headers || Object.create(null)\n      o.headers.Authorization = authorization\n\n      signingKey = authorization = void 0\n      return o\n    }).then(function (o) {\n      // 请求方式\n      o.method = o.method || 'GET'\n      o.path = o.path || session.sessionInitPath || '/session/init'\n      o.serverRes = Object.create(null)\n      o.serverRes.statusCode = 0\n      o.serverRes.status = 'UNKNOW_ERROR'\n      o.serverRes.body = ''\n      // 返回一个请求\n      return request(o)\n    }).then(function (o) {\n      return new Promise(function (resolve, reject) {\n        var r = null\n        var e = null\n        var res = o.serverRes\n        try {\n          r = JSON.parse(res.body)\n        } catch (e1) {\n          e = e1\n        }\n        if (e) {\n          e.statusCode = res.statusCode\n          e.error_id = res.status\n          e.message = res.status || 'Unknow Error'\n          reject(e)\n        } else if (r) {\n          if (r.state) {\n            r.statusCode = r.statusCode || r.code || res.statusCode\n            r.error_id = r.error_id || res.status\n            r.message = r.message || r.msg || res.status || 'Unknow Error'\n            o._serverResObj = r\n            resolve(o)\n          } else {\n            e = new Error(r.message || r.msg || res.status || 'Unknow Error')\n            e.statusCode = r.statusCode || r.code || res.statusCode\n            e.error_id = r.error_id || res.status\n            e.message = r.message || r.msg || res.status || 'Unknow Error'\n            reject(e)\n          }\n        }\n        o.destroy()\n        o = resolve = reject = r = e = res = void 0\n      })\n    }).then(function (o) {\n      return new Promise(function (resolve, reject) {\n        var res = o._serverResObj\n\n        if (res.type !== 'update') {\n          // 如果不需要更新就跳过\n          resolve(o)\n          return\n        }\n        var sessionData = res.session_data\n        // 服务器时间\n        sessionData.server_time = sessionData.server_time || util.time()\n        // 本地时间\n        sessionData.local_time = util.time()\n        // 服务器时间减去本地时间\n        sessionData.difference_time = sessionData.server_time - sessionData.local_time\n        // 到期时间\n\n        if (sessionData.expires_time !== undefined && sessionData.expires_time !== null) {\n          sessionData.expires_time += sessionData.difference_time\n        } else {\n          sessionData.expires_time = util.time() + (60 * 60 * 24 * 7)\n        }\n        // 获取会话数据\n        session.setData(o, JSON.stringify(sessionData)).then(resolve).catch(reject)\n      })\n    })\n  },\n  createCard: function (o) {\n    return new Promise(function (resolve, reject) {\n      o.sessionData = o.sessionData || Object.create(null)\n      o.sessionData.session_card = 'ed9a-d251b2e6-48c3-9c08-e426-ed15398ac305-73624bb2'\n      resolve(o)\n      // reject('ed9a-d251b2e6-48c3-9c08-e426-ed15398ac305-73624bb2');\n    })\n  },\n  _initRunBaseInit: function (o) {\n    // 默认0次参数\n    o.initTryNum = o.initTryNum || 0\n    // 默认0次参数\n    o.initTrySum = o.initTrySum || session.initTrySum || 3\n    // url\n    o.baseUrl = o.baseUrl || api.baseUrl || ''\n    o.req = o.req || null\n    o.res = o.res || null\n    // 是否在node服务器运行\n    o.isServerNode = (o.isServerNode !== void 0) ? o.isServerNode : Boolean(o.req && o.res)\n    // 获取基本信息\n    o.host = o.host || url('hostname', o.baseUrl)\n    o.port = o.port || url('port', o.baseUrl)\n    o.protocol = o.protocol || url('protocol', o.baseUrl)\n  },\n  // 获取正确的会话数据\n  getTrueData: function (o) {\n    return new Promise(function (resolve, reject) {\n      var isRun = false\n      // 处理回调\n      if (o.isServerNode) {\n        o.req._getSessionTrueDataCbs = o.req._getSessionTrueDataCbs || []\n        // 服务端-处理同一请求多次初始化会话的问题，同一回调\n        o.req._getSessionTrueDataCbs.push([resolve, reject, o])\n        o.req._getSessionTrueDataCbs.push([function () {\n          if (this && this.req) {\n            this.req._getSessionTrueDataCbsIng = false\n          }\n        }.bind(o), function () {\n          if (this && this.req) {\n            this.req._getSessionTrueDataCbsIng = false\n          }\n        }.bind(o), o])\n        if (o.req._getSessionTrueDataCbsIng !== true) {\n          isRun = true\n          o.req._getSessionTrueDataCbsIng = true\n        }\n      } else if (session.isClientWindow) {\n        // 浏览器-处理同一请求多次初始化会话的问题，同一回调\n        getSessionTrueCbs.push([resolve, reject, o])\n        getSessionTrueCbs.push([function () {\n          _getSessionTrueDataCbsIng = false\n        }, function () {\n          _getSessionTrueDataCbsIng = false\n        }, o])\n        if (_getSessionTrueDataCbsIng !== true) {\n          isRun = true\n          _getSessionTrueDataCbsIng = true\n        }\n      } else {\n        reject(new Error('Neither a browser nor req and res'))\n      }\n      if (isRun) {\n        session._getTrueDataRun(o)\n      }\n      resolve = reject = o = isRun = void 0\n    })\n  },\n  // 获取正确的会话数据-开始运行\n  _getTrueDataRun: function (o) {\n    var sessionO = {\n      req: o.req || null,\n      res: o.res || null,\n      host: o.host,\n      port: o.port,\n      baseUrl: o.baseUrl,\n      protocol: o.protocol,\n      isServerNode: o.isServerNode,\n      cookieName: o.cookieName,\n      cookieNameEnCode: o.cookieNameEnCode,\n      isSessionInit: o.isSessionInit,\n      isSessionDataPass: o.isSessionDataPass,\n      sessionData: o.sessionData,\n      sessionDataStr: o.sessionDataStr,\n      sessionDataOldStr: o.sessionDataOldStr\n    }\n    var keys = Object.keys(sessionO)\n    session.getData(sessionO).then(function (o) {\n      // 检测会话是否过期\n      return new Promise(function (resolve, reject) {\n        var isSessionDataPass = true\n          // o.isSessionInit 是否强制\n        isSessionDataPass = isSessionDataPass && (!o.isSessionInit)\n          // 基本需要的数据检测\n        isSessionDataPass = isSessionDataPass && o.sessionData && o.sessionData.session_id && o.sessionData.session_key && o.sessionData.session_card\n          // 检测事件\n        isSessionDataPass = isSessionDataPass && o.sessionData.expires_time && util.time() < (o.sessionData.expires_time - 5)\n        // 为了保证没有问题，提前5秒钟过期\n        if (isSessionDataPass) {\n          // 下一步\n          resolve(o)\n          // 回收\n          resolve = reject = o = void 0\n        } else {\n          // 重新初始化\n          o.isSessionInit = undefined\n          session.init({\n            req: o.req || null,\n            res: o.res || null,\n            host: o.host,\n            port: o.port,\n            baseUrl: o.baseUrl,\n            protocol: o.protocol,\n            isServerNode: o.isServerNode\n          }).then(function () {\n            if (typeof resolve === 'function') {\n              session.getData(o).then(resolve).catch(reject)\n            }\n            resolve = reject = o = void 0\n          }).catch(function (e) {\n            if (typeof reject === 'function') {\n              reject(e)\n            }\n            resolve = reject = o = void 0\n          })\n        }\n      })\n    }).then(function () {\n      // 批量回调成功\n      var cbt\n      if (sessionO.req && sessionO.req._getSessionTrueDataCbs) {\n        while ((cbt = sessionO.req._getSessionTrueDataCbs.shift())) {\n          if (cbt && cbt[0] && cbt[2] && util.isFunction(cbt[0])) {\n            util.copyObjByKey(cbt[2], sessionO, keys)\n            cbt[0](cbt[2])\n          }\n          cbt = void 0\n        }\n      } else if (session.isClientWindow && getSessionTrueCbs) {\n        while ((cbt = getSessionTrueCbs.shift())) {\n          if (cbt && cbt[0] && cbt[2] && util.isFunction(cbt[0])) {\n            util.copyObjByKey(cbt[2], sessionO, keys)\n            cbt[0](cbt[2])\n          }\n          cbt = void 0\n        }\n      }\n      sessionO = void 0\n    }).catch(function (e) {\n      // 批量回调异常\n      var cbt\n      if (sessionO.req && sessionO.req._getSessionTrueDataCbs) {\n        while ((cbt = sessionO.req._getSessionTrueDataCbs.shift())) {\n          if (cbt && cbt[1] && util.isFunction(cbt[1])) {\n            cbt[1](e)\n          }\n          cbt = void 0\n        }\n      } else if (session.isClientWindow && getSessionTrueCbs) {\n        while ((cbt = getSessionTrueCbs.shift())) {\n          if (cbt && cbt[1] && util.isFunction(cbt[1])) {\n            cbt[1](e)\n          }\n          cbt = void 0\n        }\n      }\n      e = sessionO = void 0\n    })\n    o = void 0\n  },\n  setData: function (o, sessionData) {\n    return new Promise(function (resolve, reject) {\n      if (!o.cookieName) {\n        // 根据host和port生成cookieName\n        o.cookieName = o.host + (o.port ? (':' + o.port) : '')\n      }\n      // 编码cookieName\n      o.cookieNameEnCode = session._cookieNameEnCode(o.cookieName)\n      if (o.isServerNode) {\n        // 服务器模式\n        session._setDataNode(o, sessionData, resolve, reject)\n      } else if (session.isClientWindow) {\n        // 客户端\n        session._setDataClient(o, sessionData, resolve, reject)\n      } else {\n        // 不确定是什么浏览器\n        reject(new Error('Neither a browser nor req and res'))\n      }\n      resolve = reject = o = void 0\n    })\n  },\n  getData: function (o) {\n    return new Promise(function (resolve, reject) {\n      if (!o.cookieName) {\n        // 根据host和port生成cookieName\n        o.cookieName = o.host + (o.port ? (':' + o.port) : '')\n      }\n      // 编码cookieName\n      o.cookieNameEnCode = session._cookieNameEnCode(o.cookieName)\n      if (o.isServerNode) {\n        // 服务器模式\n        session._getDataNode(o, resolve, reject)\n      } else if (session.isClientWindow) {\n        // 客户端\n        session._getDataClient(o, resolve, reject)\n      } else {\n        // 不确定是什么浏览器\n        reject(new Error('Neither a browser nor req and res'))\n      }\n      resolve = reject = o = void 0\n    }).then(function (o) {\n      // 反序列化会话数据\n      return new Promise(function (resolve, reject) {\n        if (o.sessionDataStr && typeof o.sessionDataStr === 'string') {\n          try {\n            o.sessionData = JSON.parse(o.sessionDataStr)\n          } catch (e) {\n            o.sessionData = o.sessionData || Object.create(null)\n          }\n        } else {\n          o.sessionData = o.sessionData || Object.create(null)\n        }\n        // 清理\n        delete o.sessionDataStr\n        // 序列化用于后期比对\n        o.sessionDataOldStr = session.arrayToStr(o.sessionData)\n        // 回调下一步\n        resolve(o)\n      })\n    })\n  },\n  // node服务端获取\n  _getDataNode: function (o, resolve, reject) {\n    var cookiename\n    try {\n      cookiename = o.cookieNameEnCode\n      o.sessionDataStr = (o.res && o.res.cookieDdvRestfulApiStr) || session._getCookiesServer(cookiename, o.req) || o.sessionDataStr\n      // 本地存储模块\n      if (util.isFunction(resolve)) {\n        resolve(o)\n      }\n    } catch (e) {\n      if (util.isFunction(reject)) {\n        reject(e)\n      }\n    }\n    resolve = reject = o = void 0\n  },\n  // 客户端获取\n  _setDataNode: function (o, data, resolve, reject) {\n    if (!(o && o.res)) {\n      reject(new Error('Your browser does not support cookies and localStorage'))\n      return\n    }\n    if (!o.cookieNameEnCode) {\n      reject(new Error('Deceased cookie surname'))\n      return\n    }\n    var cookiename = o.cookieNameEnCode\n    o.res.cookieDdvRestfulApiStr = data\n    try {\n      // 本地存储模块\n      if (session.isLongStorage) {\n        session._setCookiesServer(o.req, o.res, cookiename, data)\n      } else {\n        session._setCookiesServer(o.req, o.res, cookiename, data, session.getExpiresDate('365', '12', '60'))\n      }\n\n      if (util.isFunction(resolve)) {\n        resolve(o)\n      }\n    } catch (e) {\n      if (util.isFunction(reject)) {\n        reject(e)\n      }\n    }\n    resolve = reject = data = o = void 0\n  },\n  // 设置cookies\n  _getCookiesServer: function (key, req) {\n    if (req) {\n      return (req.cookies && req.cookies[key]) || session._getCookiesByStr(key, (req.headers && req.headers.cookie || '')) || ''\n    } else {\n      return ''\n    }\n  },\n  // 设置cookies\n  _setCookiesServer: function (req, res, key, value, expires, path, domain, isSecure) {\n    var t\n    if (!res) {\n      return\n    }\n    if (util.isFunction(res.cookie)) {\n      t = { domain: domain || '', path: path || '/', secure: Boolean(isSecure) }\n      if (t.domain) {\n        delete t.domain\n      }\n      if (t.secure) {\n        delete t.secure\n      }\n      if (expires) {\n        t.expires = new Date(expires)\n      }\n      res.cookie(key, value, t)\n    } else {\n      t = ''\n      t += (key.toString().trim() + '=')\n      t += session.escape(value)\n      t += expires ? '; expires=' + expires : ''\n      t += (typeof path === 'string' && path !== '') ? ('; path=' + path) : '; path=/'\n      t += (typeof domain === 'string' && domain !== '') ? '; domain=' + domain : ''\n      t += isSecure ? '; secure' : ''\n      if (req.headers && req.headers.cookie) {\n        req.headers.cookie = t\n      }\n      // 强制一个数组\n      res.cookiesSetArray = res.cookiesSetArray || []\n      // 加入输出数组\n      res.cookiesSetArray.push(t)\n      // 设置输出头\n      res.setHeader('Set-Cookie', res.cookiesSetArray)\n    }\n    t = void 0\n  },\n  // 客户端获取\n  _getDataClient: function (o, resolve, reject) {\n    var cookiename, data\n    if (!(session.isLocalCookie || session.isLocalStorage || session.isSessionStorage)) {\n      reject(new Error('Your browser does not support cookies and localStorage'))\n      return\n    }\n    try {\n      cookiename = o.cookieNameEnCode\n      data = session._getCookiesClient(cookiename) || null\n      // 本地存储模块\n      if (!data) {\n        try {\n          if (session.isLongStorage) {\n            // 长期存储模式\n            data = localStorage.getItem(cookiename) || null\n            session._setCookiesClient(cookiename, data)\n          } else {\n            // 会话形式\n            data = sessionStorage.getItem(cookiename) || null\n            session._setCookiesClient(cookiename, data, session.getExpiresDate('365', '12', '60'))\n          }\n        } catch (e) {\n          data = null\n        }\n      }\n      o.sessionDataStr = data || o.sessionDataStr\n      if (typeof resolve === 'function') {\n        resolve(o)\n      }\n    } catch (e) {\n      if (typeof reject === 'function') {\n        reject(e)\n      }\n    }\n    resolve = reject = data = o = void 0\n  },\n  // 客户端获取\n  _setDataClient: function (o, data, resolve, reject) {\n    var cookiename\n    if (!(session.isLocalCookie || session.isLocalStorage || session.isSessionStorage)) {\n      reject(new Error('Your browser does not support cookies and localStorage'))\n      return\n    }\n    try {\n      cookiename = o.cookieNameEnCode\n      // 本地存储模块\n      if (session.isLongStorage) {\n        // 长期存储模式\n        if (session.isLocalStorage) {\n          localStorage.setItem(cookiename, data)\n        }\n        session._setCookiesClient(cookiename, data)\n      } else {\n        // 会话形式\n        if (session.isSessionStorage) {\n          sessionStorage.setItem(cookiename, data)\n        }\n        session._setCookiesClient(cookiename, data, session.getExpiresDate('365', '12', '60'))\n      }\n\n      if (util.isFunction(resolve)) {\n        resolve(o)\n      }\n    } catch (e) {\n      if (util.isFunction(reject)) {\n        reject(e)\n      }\n    }\n    resolve = reject = data = o = void 0\n  },\n  // 客户端读取\n  _getCookiesClient: function (key) {\n    if (session.isLocalCookie) {\n      return session._getCookiesByStr(key, document.cookie)\n    } else {\n      return ''\n    }\n  },\n  // 客户端存储\n  _setCookiesClient: function (key, value, expires, path, domain, isSecure) {\n    var t\n    key = (key || '').toString().trim()\n    try {\n      if (VS_COOKIEDM !== undefined && VS_COOKIEDM !== null && !domain) {\n        domain = VS_COOKIEDM\n      }\n    } catch (e) {}\n    t = ''\n    t += (key.toString().trim() + '=')\n    t += session.escape(value)\n    t += expires ? '; expires=' + expires : ''\n    t += (typeof path === 'string' && path !== '') ? ('; path=' + path) : '; path=/'\n    t += (typeof domain === 'string' && domain !== '') ? '; domain=' + domain : ''\n    t += isSecure ? '; secure' : ''\n    document.cookie = t\n    t = void 0\n  },\n  _cookieNameEnCode: function (name) {\n    name = cryptoJsCore.enc.Utf8.parse((name || 'sid').toString() || '').toString(cryptoJsBase64)\n    name = name.replace(/_/g, '____').replace(/\\+/g, '___').replace(/\\//g, '__').replace(/=/g, '_')\n    return name\n  },\n  // 数组序列化\n  _getCookiesByStr: function (key, str) {\n    var value = '';\n    ((str || '').split(';') || []).forEach(function (t, i) {\n      var a = (t || '').split('=') || []\n      if ((a[0] || '').toString().trim() === key) {\n        value = session.unescape((a[1] || '').toString().trim())\n      }\n      a = t = i = void 0\n    })\n    return value\n  },\n  // 数组序列化\n  arrayToStr: function (obj) {\n    var a = []\n    var name\n    for (name in obj) {\n      if (!Object.hasOwnProperty.call(obj, name)) {\n        continue\n      }\n      a.push(name + '=' + obj[name])\n    }\n    name = void 0\n    a.sort()\n    obj = void 0\n    a = a.join(';')\n    return a\n  },\n  // 获取GMT格式的过期时间\n  getExpiresDate: function (days, hours, minutes, seconds) {\n    var ExpiresDate = new Date()\n    if (util.isNumber(days) && util.isNumber(hours) && util.isNumber(minutes)) {\n      ExpiresDate.setDate(ExpiresDate.getDate() + parseInt(days))\n      ExpiresDate.setHours(ExpiresDate.getHours() + parseInt(hours))\n      ExpiresDate.setMinutes(ExpiresDate.getMinutes() + parseInt(minutes))\n      if (util.isNumber(seconds)) {\n        ExpiresDate.setSeconds(ExpiresDate.getSeconds() + parseInt(seconds))\n      }\n    }\n    return ExpiresDate.toGMTString()\n  }\n})\n\n// 局部变量-是否为客户端窗口\nsession.isClientWindow = typeof window !== 'undefined' && window.window === window && typeof window.document !== 'undefined'\n// 局部变量-本地cookie是否为客户端窗口支持\nsession.isLocalCookie = false\n// 局部变量-本地存储是否为客户端窗口支持\nsession.isLocalStorage = false\n// 局部变量-本地会话存储是否为客户端窗口支持\nsession.isSessionStorage = false\nsession.isLongStorage = false\nsession.sessionInitPath = '/session/init'\nif (session.isClientWindow) {\n  try {\n    session.isLocalCookie = 'cookie' in window.document\n  } catch (e) {}\n  try {\n    session.isLocalStorage = 'localStorage' in window\n  } catch (e) {}\n  try {\n    session.isSessionStorage = 'sessionStorage' in window\n  } catch (e) {}\n}\n\nfunction session () {\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./lib/session.js","'use strict'\n// 导出签名模块\n// 工具\nvar util = require('../util')\nvar sign = module.exports = Object.assign(function sign (o) {\n  return sign._signRun(o)\n}, {\n  headersPrefix: 'x-ddv-',\n  excludeHeaderKeys: ['host', 'content-length', 'content-type', 'content-md5'],\n  // 设置headersPrefix\n  setHeadersPrefix: function setHeadersPrefix (prefix) {\n    sign.headersPrefix = prefix\n  },\n  // 签名头\n  _signRun: function (o) {\n    return new Promise(function signInit (resolve, reject) {\n      // base初始化\n      sign._signRunBaseInit(o)\n      // 初始化GET参数\n      sign._signRunQueryInit(o)\n      // 格式化头信息\n      sign._signRunHeadersFormat(o)\n      // 签名头排序\n      sign._signRunHeadersSort(o)\n      // 提交下一步\n      resolve(o)\n      o = void 0\n    }).then(function (o) {\n      // 获取校验过的session数据\n      return session.getTrueData(o)\n    }).then(function (o) {\n      // 会话id\n      var sessionId = o.sessionData.session_id\n      // 会话秘钥\n      var sessionKey = o.sessionData.session_key || 'session_key'\n      // 设备识别号\n      var sessionCard = o.sessionData.session_card\n      // 时间差\n      var differenceTime = o.sessionData.difference_time\n\n      // 授权字符串\n      o.Authorization = 'app-auth-v2' + '/' + o.request_id + '/' + sessionId + '/' + sessionCard + '/' + sign.getUTCServerTime(differenceTime) + '/' + '1800'\n      // 生成临时秘钥-用于加密的key-防止丢失正式key\n      var signingKey = sign.HmacSHA256(o.Authorization, sessionKey)\n\n      // 拼接内容\n      var canonicalRequest = o.method + o.n + util.urlEncodeExceptSlash(o.path) + o.n + o.query + o.n + o.authCanonicalHeadersStr\n      // 使用signKey和标准请求串完成签名\n      var sessionSign = sign.HmacSHA256(canonicalRequest, signingKey)\n      // 组成最终签名串\n      o.Authorization += '/' + o.authHeadersStr + '/' + sessionSign\n      // 进入下一步\n      return o\n    }).then(function (o) {\n      if (!o.headers) {\n        o.headers = Object.create(null)\n      }\n      o.headers['Authorization'] = o.Authorization\n      // 回收数据\n      delete o.authHeadersStr\n      delete o.authCanonicalHeadersStr\n      return o\n    })\n  },\n  // 签名头排序\n  _signRunHeadersSort: function (o) {\n    // 要签名的头的key的一个数组\n    o.authHeadersStr = []\n    // 签名的头\n    o.authCanonicalHeadersStr = []\n\n    o.headersPrefix = o.headersPrefix || sign.headersPrefix\n    o.headersPrefixLen = o.headersPrefix.length\n    var keyLower, key, value\n    var headersOld = o.headers\n    for (key in headersOld) {\n      if (!Object.hasOwnProperty.call(headersOld, key)) {\n        continue\n      }\n      // 取得key对应的value\n      value = headersOld[key]\n      // 小写的key\n      keyLower = key.toLowerCase()\n      // 判断一下\n      if (sign.excludeHeaderKeys.indexOf(keyLower) > -1 || keyLower.substr(0, o.headersPrefixLen) === o.headersPrefix) {\n        o.authCanonicalHeadersStr.push(util.urlEncode(keyLower) + ':' + util.urlEncode(value))\n        o.authHeadersStr.push(keyLower)\n      }\n    }\n\n    // 排序\n    o.authCanonicalHeadersStr.sort()\n    // 用\\n拼接\n    o.authCanonicalHeadersStr = o.authCanonicalHeadersStr.join(o.n)\n    // 用;拼接\n    o.authHeadersStr = o.authHeadersStr.join(';')\n  },\n  // 格式化头信息\n  _signRunHeadersFormat: function (o) {\n    // 克隆\n    var headersTemp = Object.create(null)\n    var headersOld = o.headers\n    var value = ''\n    var key = ''\n    // 遍历头\n    for (key in headersOld) {\n      // 去左右空格\n      key = sign._trim(key)\n      value = sign._trim(headersOld[key])\n      switch (key.toLowerCase()) {\n        case 'authorization':\n          continue\n        case 'host':\n          key = 'Host'\n          break\n        case 'content-length':\n          key = 'Content-Length'\n          break\n        case 'content-type':\n          key = 'Content-Type'\n          break\n        case 'content-md5':\n          key = 'Content-Md5'\n          break\n      }\n      if (value) {\n        headersTemp[key] = value\n      }\n    }\n    // 把处理后的赋值回给\n    o.headers = headersTemp\n    // 释放内存\n    headersTemp = headersOld = key = value = void 0\n    // 强制有host头\n    o.headers.Host = o.headers.Host ? o.headers.Host : o.host\n\n    if (o.body && o.body.length > 0) {\n      o.headers['Content-Length'] = o.headers['Content-Length'] ? o.headers['Content-Length'] : o.body.length\n      o.headers['Content-Type'] = o.headers['Content-Type'] ? o.headers['Content-Type'] : 'application/x-www-form-urlencoded; charset=UTF-8'\n      o.headers['Content-Md5'] = sign.md5Base64(o.body)\n    }\n  },\n  // 初始化GET参数\n  _signRunQueryInit: function (o) {\n    // 签名数组\n    var queryArray = []\n    if (o.query && o.query.length > 0) {\n      o.query.split('&').forEach(function (t) {\n        if (!t) {\n          return\n        }\n        var key, value, i\n          // 找到第一个等号的首次出现位置\n        i = t.indexOf('=')\n          // 取得key\n        key = t.substr(0, i)\n          // 取得value\n        value = t.substr(i + 1)\n          // 先去左右空格再编码\n        key = sign._trim(key)\n        value = sign._trim(value)\n          // 插入新数组\n        queryArray.push(key + '=' + value)\n      })\n    }\n    // 排序\n    queryArray.sort()\n    // 用&拼接\n    o.query = queryArray.join('&')\n    // 回收内存\n    queryArray = void 0\n  },\n  // base初始化\n  _signRunBaseInit: function (o) {\n    // 默认换行\n    o.n = o.n || '\\n'\n    // 请求id\n    o.request_id = o.request_id || util.createRequestId()\n    // 请求方式\n    o.method = (o.method || 'GET').toString().toUpperCase()\n    // 强制是字符串\n    o.query = o.query || ''\n    // get请求\n    if (o.method.toLowerCase() === 'GET') {\n      // 如果有请求体\n      if (o.body) {\n        // 拼接到query中\n        o.query += o.query ? '&' : ''\n        // 清空请求体\n        o.body = ''\n      }\n    } else {\n      o.body = o.body || ''\n    }\n  },\n  getUTCServerTime: function (differenceTime) {\n    var d\n    d = new Date()\n    d = new Date(parseInt(d.getTime() + ((parseInt(differenceTime) || 0) * 1000)) + (60 * d.getTimezoneOffset()))\n    return d.getUTCFullYear() + '-' + sign._replenish((d.getUTCMonth() + 1), 2) + '-' + sign._replenish((d.getUTCDate()), 2) + 'T' + sign._replenish((d.getUTCHours()), 2) + ':' + sign._replenish((d.getUTCMinutes()), 2) + ':' + sign._replenish((d.getUTCSeconds()), 2) + 'Z'\n  },\n  _replenish: function (text, total, rstr) {\n    text = text.toString()\n    var rstrlen = (total - text.length) || 0\n    var rstri = 0\n    var r = text\n    switch (arguments.length) {\n      case 3:\n        break\n      case 2:\n        rstr = '0'\n        break\n      default:\n        return r\n    }\n    for (rstri = 0; rstri < rstrlen; rstri++) {\n      r = rstr.toString() + r.toString()\n    }\n    return r\n  },\n  _trim: function (str) {\n    return str.toString().trim()\n  },\n  md5Hex: function (str, isToString) {\n    str = str || ''\n    if (isToString !== false) {\n      str = str.toString()\n    }\n    return cryptoJsCore.MD5(str).toString(cryptoJsHex)\n  },\n  md5Base64: function (str, isToString) {\n    str = str || ''\n    if (isToString !== false) {\n      str = str.toString()\n    }\n    return cryptoJsCore.MD5(str).toString(cryptoJsBase64)\n  },\n  HmacSHA256: function (str, key, isToString) {\n    str = str || ''\n    if (isToString !== false) {\n      str = str.toString()\n    }\n    return cryptoJsCore.HmacSHA256(str, key).toString(cryptoJsHex)\n  }\n})\n// 引入签名会话模块\n// 引入请求模块\nvar session = require('./session.js')\nvar cryptoJsCore = require('crypto-js/core')\n// var cryptoJsMd5 =\nrequire('crypto-js/md5')\n// var cryptoJsHmacSha256 =\nrequire('crypto-js/hmac-sha256')\nvar cryptoJsBase64 = require('crypto-js/enc-base64')\nvar cryptoJsHex = require('crypto-js/enc-hex')\n\n\n\n// WEBPACK FOOTER //\n// ./lib/sign.js","module.exports = (function () {\n  function _t () {\n    return new RegExp(/(.*?)\\.?([^.]*?)\\.?(com|net|org|biz|ws|in|me|co\\.uk|co|org\\.uk|ltd\\.uk|plc\\.uk|me\\.uk|edu|mil|br\\.com|cn\\.com|eu\\.com|hu\\.com|no\\.com|qc\\.com|sa\\.com|se\\.com|se\\.net|us\\.com|uy\\.com|ac|co\\.ac|gv\\.ac|or\\.ac|ac\\.ac|af|am|as|at|ac\\.at|co\\.at|gv\\.at|or\\.at|asn\\.au|com\\.au|edu\\.au|org\\.au|net\\.au|id\\.au|be|ac\\.be|adm\\.br|adv\\.br|am\\.br|arq\\.br|art\\.br|bio\\.br|cng\\.br|cnt\\.br|com\\.br|ecn\\.br|eng\\.br|esp\\.br|etc\\.br|eti\\.br|fm\\.br|fot\\.br|fst\\.br|g12\\.br|gov\\.br|ind\\.br|inf\\.br|jor\\.br|lel\\.br|med\\.br|mil\\.br|net\\.br|nom\\.br|ntr\\.br|odo\\.br|org\\.br|ppg\\.br|pro\\.br|psc\\.br|psi\\.br|rec\\.br|slg\\.br|tmp\\.br|tur\\.br|tv\\.br|vet\\.br|zlg\\.br|br|ab\\.ca|bc\\.ca|mb\\.ca|nb\\.ca|nf\\.ca|ns\\.ca|nt\\.ca|on\\.ca|pe\\.ca|qc\\.ca|sk\\.ca|yk\\.ca|ca|cc|ac\\.cn|com\\.cn|edu\\.cn|gov\\.cn|org\\.cn|bj\\.cn|sh\\.cn|tj\\.cn|cq\\.cn|he\\.cn|nm\\.cn|ln\\.cn|jl\\.cn|hl\\.cn|js\\.cn|zj\\.cn|ah\\.cn|gd\\.cn|gx\\.cn|hi\\.cn|sc\\.cn|gz\\.cn|yn\\.cn|xz\\.cn|sn\\.cn|gs\\.cn|qh\\.cn|nx\\.cn|xj\\.cn|tw\\.cn|hk\\.cn|mo\\.cn|cn|cx|cz|de|dk|fo|com\\.ec|tm\\.fr|com\\.fr|asso\\.fr|presse\\.fr|fr|gf|gs|co\\.il|net\\.il|ac\\.il|k12\\.il|gov\\.il|muni\\.il|ac\\.in|co\\.in|org\\.in|ernet\\.in|gov\\.in|net\\.in|res\\.in|is|it|ac\\.jp|co\\.jp|go\\.jp|or\\.jp|ne\\.jp|ac\\.kr|co\\.kr|go\\.kr|ne\\.kr|nm\\.kr|or\\.kr|li|lt|lu|asso\\.mc|tm\\.mc|com\\.mm|org\\.mm|net\\.mm|edu\\.mm|gov\\.mm|ms|nl|no|nu|pl|ro|org\\.ro|store\\.ro|tm\\.ro|firm\\.ro|www\\.ro|arts\\.ro|rec\\.ro|info\\.ro|nom\\.ro|nt\\.ro|se|si|com\\.sg|org\\.sg|net\\.sg|gov\\.sg|sk|st|tf|ac\\.th|co\\.th|go\\.th|mi\\.th|net\\.th|or\\.th|tm|to|com\\.tr|edu\\.tr|gov\\.tr|k12\\.tr|net\\.tr|org\\.tr|com\\.tw|org\\.tw|net\\.tw|ac\\.uk|uk\\.com|uk\\.net|gb\\.com|gb\\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\\.hk|org\\.hk|net\\.hk|edu\\.hk|us|tk|cd|by|ad|lv|eu\\.lv|bz|es|jp|cl|ag|mobi|eu|co\\.nz|org\\.nz|net\\.nz|maori\\.nz|iwi\\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\\.pt|edu\\.pt|asia|fi|com\\.ve|net\\.ve|fi|org\\.ve|web\\.ve|info\\.ve|co\\.ve|tel|im|gr|ru|net\\.ru|org\\.ru|hr|com\\.hr|ly|xyz|so)$/)\n  }\n\n  function _d (s) {\n    return decodeURIComponent(s.replace(/\\+/g, ' '))\n  }\n\n  function _i (arg, str) {\n    var sptr = arg.charAt(0)\n    var split = str.split(sptr)\n\n    if (sptr === arg) { return split }\n\n    arg = parseInt(arg.substring(1), 10)\n\n    return split[arg < 0 ? split.length + arg : arg - 1]\n  }\n\n  function _f (arg, str) {\n    var sptr = arg.charAt(0)\n    var split = str.split('&')\n    var field = []\n    var params = {}\n    var tmp = []\n    var arg2 = arg.substring(1)\n\n    for (var i = 0, ii = split.length; i < ii; i++) {\n      field = split[i].match(/(.*?)=(.*)/)\n\n      // TODO: regex should be able to handle this.\n      if (!field) {\n        field = [split[i], split[i], '']\n      }\n\n      if (field[1].replace(/\\s/g, '') !== '') {\n        field[2] = _d(field[2] || '')\n\n        // If we have a match just return it right away.\n        if (arg2 === field[1]) { return field[2] }\n\n        // Check for array pattern.\n        tmp = field[1].match(/(.*)\\[([0-9]+)]/)\n\n        if (tmp) {\n          params[tmp[1]] = params[tmp[1]] || []\n\n          params[tmp[1]][tmp[2]] = field[2]\n        } else {\n          params[field[1]] = field[2]\n        }\n      }\n    }\n\n    if (sptr === arg) { return params }\n\n    return params[arg2]\n  }\n\n  return function (arg, url) {\n    var _l = {}\n    var tmp\n\n    if (arg === 'tld?') { return _t() }\n\n    url = url || ((typeof window !== 'undefined' && window.location) || '').toString()\n\n    if (!arg) { return url }\n\n    arg = arg.toString()\n\n    if ((tmp = url.match(/^mailto:([^/].+)/))) {\n      _l.protocol = 'mailto'\n      _l.email = tmp[1]\n    } else {\n      // Ignore Hashbangs.\n      if ((tmp = url.match(/(.*?)\\/#!(.*)/))) {\n        url = tmp[1] + tmp[2]\n      }\n\n      // Hash.\n      if ((tmp = url.match(/(.*?)#(.*)/))) {\n        _l.hash = tmp[2]\n        url = tmp[1]\n      }\n\n      // Return hash parts.\n      if (_l.hash && arg.match(/^#/)) { return _f(arg, _l.hash) }\n\n      // Query\n      if ((tmp = url.match(/(.*?)\\?(.*)/))) {\n        _l.query = tmp[2]\n        url = tmp[1]\n      }\n\n      // Return query parts.\n      if (_l.query && arg.match(/^\\?/)) { return _f(arg, _l.query) }\n\n      // Protocol.\n      if ((tmp = url.match(/(.*?):?\\/\\/(.*)/))) {\n        _l.protocol = tmp[1].toLowerCase()\n        url = tmp[2]\n      }\n\n      // Path.\n      if ((tmp = url.match(/(.*?)(\\/.*)/))) {\n        _l.path = tmp[2]\n        url = tmp[1]\n      }\n\n      // Clean up path.\n      _l.path = (_l.path || '').replace(/^([^/])/, '/$1').replace(/\\/$/, '')\n\n      // Return path parts.\n      if (arg.match(/^[-0-9]+$/)) { arg = arg.replace(/^([^/])/, '/$1') }\n      if (arg.match(/^\\//)) { return _i(arg, _l.path.substring(1)) }\n\n      // File.\n      tmp = _i('/-1', _l.path.substring(1))\n\n      if (tmp && (tmp = tmp.match(/(.*?)\\.(.*)/))) {\n        _l.file = tmp[0]\n        _l.filename = tmp[1]\n        _l.fileext = tmp[2]\n      }\n\n      // Port.\n      if ((tmp = url.match(/(.*):([0-9]+)$/))) {\n        _l.port = tmp[2]\n        url = tmp[1]\n      }\n\n      // Auth.\n      if ((tmp = url.match(/(.*?)@(.*)/))) {\n        _l.auth = tmp[1]\n        url = tmp[2]\n      }\n\n      // User and pass.\n      if (_l.auth) {\n        tmp = _l.auth.match(/(.*):(.*)/)\n\n        _l.user = tmp ? tmp[1] : _l.auth\n        _l.pass = tmp ? tmp[2] : undefined\n      }\n\n      // Hostname.\n      _l.hostname = url.toLowerCase()\n\n      // Return hostname parts.\n      if (arg.charAt(0) === '.') { return _i(arg, _l.hostname) }\n\n      // Domain, tld and sub domain.\n      if (_t()) {\n        tmp = _l.hostname.match(_t())\n\n        if (tmp) {\n          _l.tld = tmp[3]\n          _l.domain = tmp[2] ? tmp[2] + '.' + tmp[3] : undefined\n          _l.sub = tmp[1] || undefined\n        }\n      }\n\n      // Set port and protocol defaults if not set.\n      _l.port = _l.port || (_l.protocol === 'https' ? '443' : '80')\n      _l.protocol = _l.protocol || (_l.port === '443' ? 'https' : 'http')\n      _l.protocol = _l.protocol + ':'\n    }\n\n    // Return arg.\n    if (arg in _l) { return _l[arg] }\n\n    // Return everything.\n    if (arg === '{}') { return _l }\n\n    // Default to undefined for no match.\n    return undefined\n  }\n})()\n\n\n\n// WEBPACK FOOTER //\n// ./lib/url.js","'use strict'\nvar http = require('http')\nvar https = require('https')\nvar session = require('./session.js')\nvar isWindow = typeof window !== 'undefined' && window.window === window\n// 发送请求\nmodule.exports = function ajax (o) {\n  return isWindow ? ajaxbyWindow(o) : ajaxbyNode(o)\n}\nfunction ajaxbyWindow (o) {\n  return new Promise(function (resolve, reject) {\n    var url = parseUrl({\n      protocol: (o.protocol || 'http:'),\n      host: o.host,\n      port: (o.port || '80'),\n      path: (o.path || '/'),\n      query: (o.query || '')\n    })\n    var xhr\n\n    // 创建 - 非IE6 - 第一步\n    if (typeof window !== 'undefined' && window.XMLHttpRequest) {\n      xhr = new window.XMLHttpRequest()\n    } else {\n      // IE6及其以下版本浏览器\n      xhr = new window.ActiveXObject('Microsoft.XMLHTTP')\n    }\n\n    // 接收 - 第三步\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        var status = xhr.status\n        var statusText = xhr.statusText\n        if (status >= 200 && status < 300) {\n          var serverRes = {}\n          serverRes.headers = {}\n          serverRes.rawHeaders = []\n          serverRes.body = xhr.response\n          serverRes.statusCode = xhr.status\n          serverRes.statusMessage = xhr.statusText\n          serverRes.status = xhr.statusText\n\n          var headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n          headers.forEach(function (header) {\n            var matches = header.match(/^([^:]+):\\s*(.*)/)\n            if (matches) {\n              var key = matches[1].toLowerCase()\n              if (key === 'set-cookie') {\n                if (serverRes.headers[key] === undefined) {\n                  serverRes.headers[key] = []\n                }\n                serverRes.headers[key].push(matches[2])\n              } else if (serverRes.headers[key] !== undefined) {\n                serverRes.headers[key] += ', ' + matches[2]\n              } else {\n                serverRes.headers[key] = matches[2]\n              }\n              serverRes.rawHeaders.push(matches[1], matches[2])\n            }\n          })\n          resolve(serverRes)\n        } else {\n          var e = new Error(statusText)\n          e.statusCode = xhr.status\n          e.statusMessage = xhr.statusText\n          e.status = xhr.statusText\n          reject(e)\n        }\n      }\n    }\n    // 连接 和 发送 - 第二步\n    xhr.open((o.method || 'GET').toUpperCase(), url, true)\n    // 设置表单提交时的内容类型\n    var key, value, headers\n    headers = o.headers\n    for (key in headers) {\n      if (key.toLowerCase() === 'host' || key.toLowerCase() === 'content-length') {\n        continue\n      }\n      value = headers[key]\n      if (Array.isArray(value)) {\n        value.forEach(function (vt) {\n          xhr.setRequestHeader(key, vt)\n        })\n      } else {\n        xhr.setRequestHeader(key, headers[key])\n      }\n      value = Array.isArray(value) ? value.join(' ') : value\n    }\n    xhr.send(o.body || null)\n  })\n}\nfunction ajaxbyNode (o) {\n  return new Promise(function (resolve, reject) {\n    var opt, req\n    if (!(o.isServerNode || session.isClientWindow)) {\n      // 不是浏览器和node服务器\n      reject(new Error('Neither a browser nor req and res'))\n      return\n    }\n    opt = {\n      method: (o.method || 'GET'),\n      protocol: (o.protocol || 'http:'),\n      host: o.host,\n      port: (o.port || '80'),\n      path: (o.path || '/'),\n      headers: o.headers\n    }\n    if (o.query) {\n      opt.path += '?' + o.query\n    }\n    // 发送请求\n    req = (opt.protocol === 'http:' ? http : https).request(opt, function (response) {\n      var serverRes = {}\n      serverRes.body = ''\n      response.on('data', function (data) {\n        serverRes.body += data\n      }).on('end', function () {\n        serverRes.statusCode = response.statusCode || 200\n        serverRes.status = response.statusMessage.toString() || 'UNKNOW_ERROR'\n        serverRes.rawHeaders = response.rawHeaders || []\n        serverRes.headers = response.headers || Object.create(null)\n        resolve(serverRes)\n      })\n    })\n    if (o.body) {\n      req.write(o.body)\n    }\n    req.on('error', function (e) {\n      reject(e)\n    })\n    req.end()\n    opt = req = void 0\n  })\n}\nfunction parseUrl (obj) {\n  var r = ''\n  r += obj.protocol || 'http:'\n  r += '//' + (obj.host || '')\n  r += obj.port ? (((obj.protocol === 'http:' && obj.port === '80') || (obj.protocol === 'https:' && obj.port === '443')) ? '' : (':' + obj.port)) : ''\n  obj.pathquery = obj.pathquery || (obj.path || '/') + (obj.query ? ('?' + obj.query) : '')\n  r += obj.pathquery\n  return r\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/ajax.js","module.exports = require(\"crypto-js/core\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto-js/core\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"crypto-js/enc-base64\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto-js/enc-base64\"\n// module id = 8\n// module chunks = 0","'use strict'\nmodule.exports = require('events')\n\n\n\n// WEBPACK FOOTER //\n// ./events/index.js","'use strict'\nvar api = require('./api.js')\napi.url = require('./url.js')\napi.ajax = require('./ajax.js')\napi.sign = require('./sign.js')\napi.session = require('./session.js')\napi.request = require('./request.js')\napi.nextTick = require('../util').nextTick\napi.Promise = Promise\n// 设置headersPrefix\napi.setHeadersPrefix = api.sign.setHeadersPrefix\n// 设置是否使用长存储\napi.setLongStorage = api.session.setLongStorage\n// 设置是否使用长存储\napi.setSessionInitTrySum = api.session.setSessionInitTrySum\n// 设置初始化session的path\napi.setSessionInitPath = api.session.setSessionInitPath\n\nif (typeof window !== 'undefined' && window.window === window) {\n  window.ddvRestFulApi = api\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/apiExternal.js","'use strict'\nvar api = require('./api.js')\nvar util = require('../util')\n\napi.data = function tryGetData (context, promiseFnRun, _dataOld) {\n  if (util.isFunction(context) || context && util.isFunction(context.then)) {\n    promiseFnRun = context\n    context = void 0\n  }\n  var promiseFnReload = void 0\n  var self = this\n  var data = Object && Object.create ? Object.create(null) : {}\n  return new Promise(function tryGetDataRun (resolve, reject) {\n    var _promise\n    if (util.isFunction(promiseFnRun)) {\n      _promise = promiseFnRun.call(self, data, function (inputData) {\n        if (data && inputData && typeof inputData === 'object') {\n          Object.assign(data, inputData)\n        }\n      }, context)\n      promiseFnReload = promiseFnRun\n    } else if (promiseFnRun && util.isFunction(promiseFnRun.then)) {\n      _promise = promiseFnRun\n    }\n    self = promiseFnRun = void 0\n    // 必须是Promise实例化的对象\n    if (_promise && util.isFunction(_promise.then)) {\n      _promise.then(function resData (res) {\n        // 如果没有return数据就返回一个data\n        res = res === void 0 ? data : res\n        data = void 0\n        return res\n      }).catch(function (e) {\n        // 如果请求出现了异常\n        return api.dataErrorEmit({context: context, error: e}).then(function (res) {\n          if (res && res.isReload === true) {\n            if (promiseFnReload) {\n              // 重新发送整个请求\n              return api.data(context, promiseFnReload, _dataOld)\n            } else {\n              var e = new Error('Please resubmit or try again')\n              e.error_id = 'UNKNOW_ERROR'\n              throw e\n            }\n          } else if (res && res.res !== void 0) {\n            // 返回指定结果\n            return res.res\n          }\n        })\n      }).then(resolve).catch(reject)\n    } else {\n      var e = new Error('Your argument must be a Promise, or a method, and this method returns Promise after the call')\n      e.error_id = 'UNKNOW_ERROR'\n      reject(e)\n    }\n    _promise = void 0\n  })\n}\napi._onDataServerErrorFn = null\napi.onDataServerError = function onDataServerError (fn) {\n  api._onDataServerErrorFn = fn\n}\napi._onDataClientErrorFn = null\napi.onDataClientError = function onDataClientError (fn) {\n  api._onDataClientErrorFn = fn\n}\napi.dataErrorEmit = function dataErrorEmit (input) {\n  var context, error\n  context = input && input.context || context\n  error = input && input.error || error\n  var _promise = new Promise(function checkOnDataErrorArr (resolve, reject) {\n    reject(error)\n    resolve = reject = void 0\n  })\n  if (context && context.isServer) {\n  // 有上下文 并且是服务器端\n    if (util.isFunction(api._onDataServerErrorFn)) {\n      _promise = _promise.catch(function onCatch (e) {\n        e = api._onDataServerErrorFn(e, context)\n        context = void 0\n        return e\n      })\n    }\n  } else {\n  // 否则统一客户端方法处理\n    if (util.isFunction(api._onDataClientErrorFn)) {\n      _promise = _promise.catch(function onCatch (e) {\n        e = api._onDataClientErrorFn(e, context)\n        context = void 0\n        return e\n      })\n    }\n  }\n  return _promise\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/apiTryData.js","module.exports = require('./api.js')\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","'use strict'\n// 导出模块\nmodule.exports = nextTick\n// 工具\nvar util = require('./')\n// 下一进程队列\nvar nextTickQueue = []\n// 系统下一进程运行\nvar nextTickSys = (function () {\n  var fnc\n  if (typeof process !== 'undefined' && util.isFunction(process.nextTick)) {\n    fnc = process.nextTick\n  } else {\n    'r webkitR mozR msR oR'.split(' ').forEach(function (prefixes) {\n      if (util.isFunction(fnc)) {\n        return false\n      }\n      fnc = window[prefixes + 'equestAnimationFrame']\n    })\n    fnc = (fnc && fnc.bind && fnc.bind(window)) || window.setImmediate\n    if (!util.isFunction(fnc)) {\n      if (typeof window === 'undefined' || window.ActiveXObject || !window.postMessage) {\n        fnc = function (f) {\n          setTimeout(f, 0)\n        }\n      } else {\n        window.addEventListener('message', function () {\n          var i = 0\n          while (i < nextTickQueue.length) {\n            try {\n              nextTickQueue[i++]()\n            } catch (e) {\n              nextTickQueue.splice(0, i)\n              window.postMessage('nextTick!', '*')\n              throw e\n            }\n          }\n          nextTickQueue.length = 0\n        }, true)\n        fnc = function (fn) {\n          if (!nextTickQueue.length) {\n            window.postMessage('nextTick!', '*')\n          }\n          nextTickQueue.push(fn)\n        }\n      }\n    }\n  }\n  return fnc\n}())\n// 下一进程访问\nfunction nextTick (fn) {\n  var self = this\n  nextTickSys(function () {\n    if (util.isFunction(fn)) {\n      fn.call(self)\n    }\n    self = fn = void 0\n  })\n  setTimeout(function () {\n    if (util.isFunction(fn)) {\n      fn.call(self)\n    }\n    self = fn = void 0\n  }, 0)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./util/nextTick.js","module.exports = require(\"crypto-js/enc-hex\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto-js/enc-hex\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"crypto-js/enc-utf8\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto-js/enc-utf8\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"crypto-js/hmac-sha256\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto-js/hmac-sha256\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"crypto-js/md5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto-js/md5\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"es5-shim\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es5-shim\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"es6-shim\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-shim\"\n// module id = 19\n// module chunks = 0","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}